<?xml version="1.0" encoding="UTF-8"?>

<!--build.xml generated by maven from project.xml version 0.5dev
  on date November 20 2005, time 0059-->
<project default="jar" name="sample_core" basedir=".">
  <!--Load local and user build preferences-->
  <property file="build.properties"/>
  <property file="${user.home}/build.properties"/>
  <!--Build properties-->
  <property name="defaulttargetdir" value="${basedir}/target"/>
  <property name="libdir" value="${maven.repo.local}"/>
  <property name="classesdir" value="${basedir}/target/classes"/>
  <property name="distdir" value="${basedir}/dist"/>
  <property name="final.name" value="sample_core-0.5dev"/>
  
  <path id="build.classpath">
    <pathelement location="${libdir}/jmonitoring/jars/core_monitoring-0.5dev.jar"/>
    <pathelement location="${libdir}/jmonitoring/jars/sample_aspects-0.5dev.jar"/>
    <pathelement location="${libdir}/junit/jars/junit-3.8.1.jar"/>
    <pathelement location="${libdir}/jmock/jars/jmock-1.0.1.jar"/>
    <pathelement location="${libdir}/log4j/jars/log4j-1.2.8.jar"/>
    <pathelement location="${libdir}/commons-logging/jars/commons-logging-1.0.4.jar"/>
    <pathelement location="${libdir}/aspectj/jars/aspectjrt-1.2.1.jar"/>
    <pathelement location="${libdir}/aspectj/jars/aspectj-1.2.1.jar"/>
    <pathelement location="${libdir}/mysql/jars/mysql-connector-java-3.1.11-bin.jar"/>
    <pathelement location="${libdir}/commons-configuration/jars/commons-configuration-1.1.jar"/>
    <pathelement location="${libdir}/commons-lang/jars/commons-lang-2.0.jar"/>
    <pathelement location="${libdir}/commons-collections/jars/commons-collections-3.1.jar"/>
  </path>

  <taskdef resource="org/aspectj/tools/ant/taskdefs/aspectjTaskdefs.properties">
    <classpath>
      <pathelement location="${libdir}/aspectj/jars/aspectjtools-1.2.1.jar"/>
    </classpath>  
  </taskdef>
  
  <target name="init" description="o Initializes some properties">
    <mkdir dir="${libdir}"/>
    <condition property="noget">
      <equals arg2="only" arg1="${build.sysclasspath}"/>
    </condition>
  </target>
  
  <target name="compile" description="o Compile the code">
    <mkdir dir="${classesdir}"/>
    <iajc destDir="${classesdir}" deprecation="true" debug="true" excludes="**/package.html">
      <sourceroots>
        <pathelement location="${basedir}/src-java"/>
      </sourceroots>
      <aspectpath>
        <pathelement location="${libdir}/jmonitoring/jars/sample_aspects-0.5dev.jar"/>
      </aspectpath>
      <classpath refid="build.classpath"/>
    </iajc>
    <copy todir="${classesdir}">
      <fileset dir="${basedir}/src-java">
        <include name="**/*.xml"/>
        <include name="**/*.properties"/>
        <include name="**/*.java"/>
        <exclude name="**/.svn"/>
      </fileset>
    </copy>
    <copy todir="${classesdir}/META-INF" file="${basedir}/LICENSE.txt"/>
  </target>
  
  <target name="compile_old" description="o Compile the code">
    <mkdir dir="${classesdir}"/>
    <javac destdir="${classesdir}" deprecation="true" debug="true" optimize="false" excludes="**/package.html">
      <src>
        <pathelement location="${basedir}/../sample_aspects/target/classes"/>
        <pathelement location="${basedir}/src-java"/>
      </src>
      <classpath refid="build.classpath"/>
    </javac>
    <copy todir="${classesdir}">
      <fileset dir="${basedir}/src-java">
        <include name="**/*.xml"/>
        <include name="**/*.properties"/>
        <include name="**/*.java"/>
        <exclude name="**/.svn"/>
      </fileset>
    </copy>
    <copy todir="${classesdir}/META-INF" file="${basedir}/LICENSE.txt"/>
  </target>
  
  <target name="jar" description="o Create the jar" depends="compile">
    <jar jarfile="${defaulttargetdir}/${final.name}.jar" excludes="**/package.html" basedir="${classesdir}"/>
  </target>
  
  <target name="clean" description="o Clean up the generated directories">
    <delete dir="${defaulttargetdir}"/>
    <delete dir="${distdir}"/>
  </target>
  
</project>